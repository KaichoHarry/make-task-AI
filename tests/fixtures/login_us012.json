{
    "domain": "Enterprise File Management",
    "persona": "Corporate Employee",
    "action": "I want to safely upload business files such as contracts, invoices, and design documents",
    "reason": "To centrally manage files linked with business data and to streamline information sharing and audit compliance",
    "acceptance_criteria": [
        "File upload is only executable by authenticated users.",
        "File types allowed for upload can be controlled according to the user's role.",
        "Specification of the target entity ID (Customer, Deal, Task, etc.) is mandatory.",
        "Upload fails if the specified entity ID does not exist.",
        "The maximum size for a single file is configurable from the management screen.",
        "The default maximum file size is 20MB.",
        "Only allowed extensions can be uploaded (e.g., pdf, docx, xlsx, png, jpg, zip).",
        "MIME type verification is performed (countermeasure against extension spoofing).",
        "Executable files (exe, js, sh, etc.) are strictly rejected.",
        "Virus scanning is executed during the upload process.",
        "Files are not saved if a virus is detected.",
        "File names are sanitized (Anti-XSS).",
        "Direct specification of the file storage path is prohibited (countermeasure against Path Traversal).",
        "Storage file names are managed using UUIDs.",
        "The original file name is retained as metadata.",
        "The file hash (SHA-256) is stored.",
        "Detection of duplicate files with the same hash is possible.",
        "Storage is isolated from the application server.",
        "The file storage destination is access-controlled storage.",
        "Direct link access to files is prohibited.",
        "Authorization checks are mandatory during downloads.",
        "Users without access permissions cannot download files.",
        "File downloads are controllable via signed URLs.",
        "Expiration time for signed URLs is configurable.",
        "Communication is permitted only via HTTPS.",
        "The upload process supports asynchronous queueing.",
        "A progress display API exists for large-volume uploads.",
        "Audit logs are stored upon successful upload.",
        "Logs include user_id, target ID, IP, and timestamp.",
        "Error logs are stored even if the upload fails.",
        "Files are logically deletable.",
        "A physical deletion schedule is registered upon logical deletion.",
        "Deletion operations are restricted to permission holders only.",
        "File versioning is possible.",
        "Old files are retained as history during updates.",
        "Download history is recorded.",
        "Rate limiting is applied (Anti-DoS).",
        "ORM/parameterized queries are used as SQL injection countermeasures.",
        "API responses do not include the physical storage path.",
        "The file list retrieval API supports pagination.",
        "Search functionality by file name and tags is possible.",
        "Tagging of files is possible.",
        "Tags can be controlled from the management screen.",
        "The upload API is REST-compliant.",
        "API versioning is managed.",
        "All file operations are subject to audit logging.",
        "Logs are stored in tamper-evident storage.",
        "Files containing personal information can be stored with encryption.",
        "A backup policy is applied.",
        "Disaster Recovery (DR) configuration is supported.",
        "Target response time for the upload API is within 500ms.",
        "--- Additional Security Enhancements ---",
        "Set 'X-Content-Type-Options: nosniff' header to prevent MIME sniffing attacks.",
        "Storage bucket must have 'Public Access Block' enabled at the infrastructure level.",
        "Multipart upload is required for files exceeding a specific threshold to ensure reliability."
    ]
}