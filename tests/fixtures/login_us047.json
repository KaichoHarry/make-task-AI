{
    "domain": "HR & Payroll Management",
    "persona": "HR Representative",
    "action": "I want to automatically calculate accurate salaries based on employee attendance, allowances, and deduction information",
    "reason": "To prevent manual calculation errors and achieve legal compliance and operational efficiency",
    "acceptance_criteria": [
        "Payroll calculation is only executable by authenticated users with the HR role.",
        "The calculation target period (Start Date and End Date) is a mandatory specification.",
        "Data outside the target period is excluded from the calculation.",
        "Only finalized clock-in/out data from the attendance system is referenced.",
        "Calculation fails if unfinalized attendance data exists.",
        "Base salary is referenced from the values registered in the employee master.",
        "Allowances (overtime, late-night, holiday, transportation, etc.) can be defined by item.",
        "Overtime unit rates are automatically calculated based on statutory premium rate settings.",
        "Deductions (taxes, social insurance, welfare expenses) can be defined by item.",
        "Tax and insurance premium rates are referenced from the setting master.",
        "Different allowance rules can be applied per employee.",
        "Calculation formulas are changeable from the management screen (no code modification required).",
        "Payroll calculation is executed within a transaction.",
        "Rollback is performed if an error occurs during calculation.",
        "Calculation results are stored as individual employee pay slip records.",
        "Pay slip IDs are unique.",
        "Duplicate calculations for the same period are prevented.",
        "Upon recalculation, old pay slips are saved as history and new ones are created.",
        "Calculation process logs are stored.",
        "Logs include the executor ID, target period, and number of processed items.",
        "Switching to asynchronous batch processing is possible if the calculation time is long.",
        "The progress of batch processing can be verified.",
        "Payroll data is stored in encrypted storage.",
        "Personal information fields can be displayed with masking.",
        "Parameterized queries are used as SQL injection countermeasures.",
        "Output values are escaped as an XSS countermeasure.",
        "The same validation applies when executed via API.",
        "Manual tampering with calculation results is not possible.",
        "Corrections are only possible via the recalculation flow.",
        "An immutable flag is set after payroll finalization.",
        "Finalization processing is only possible for the Administrator role.",
        "Finalized data is recorded in the audit log.",
        "CSV export of payroll data is possible.",
        "Permission checks are enforced during CSV output.",
        "CSV download history is stored.",
        "The API response does not disclose internal calculation logic.",
        "Rate limiting is applied to the API.",
        "Target response time for the calculation API is within 1 second (during synchronous processing).",
        "Audit logs are stored in tamper-evident storage."
    ]
}