{
    "domain": "Enterprise Reporting System",
    "persona": "Corporate Administrative Representative",
    "action": "I want to safely export business data from the system in CSV or PDF format",
    "reason": "To use it for internal reporting, audit submissions, and materials for customer sharing",
    "acceptance_criteria": [
        "Report output is only executable by authenticated users.",
        "Only roles with output permissions can perform exports.",
        "Data outside the user's viewing permission scope must not be included (authorization filter mandatory).",
        "Both CSV and PDF output formats are supported.",
        "A maximum item count limit for output can be set.",
        "If the limit is exceeded, an error is returned or the output is split.",
        "Search and filter conditions can be specified before output.",
        "Search conditions used during output are saved in the logs.",
        "CSV is output in UTF-8 encoding.",
        "Values containing commas and newlines in CSV are properly escaped.",
        "CSV Injection countermeasures (sanitizing values starting with =, +, -, @) are implemented.",
        "PDF output is generated based on a template layout.",
        "The executing username and output timestamp are automatically inserted into the PDF.",
        "A hash value is generated for the PDF file to prevent tampering.",
        "Personal information fields can be configured for masking.",
        "Masking settings can be controlled on a per-role basis.",
        "Output processing is executed on the server side.",
        "Output files are saved in temporary storage.",
        "Temporary files are automatically deleted after a specific period.",
        "Signed URLs are used for file download URLs.",
        "Signed URLs have an expiration date.",
        "Downloads are prohibited once the URL expires.",
        "Output processing can be executed as an asynchronous job.",
        "Large-volume output automatically switches to background processing.",
        "Job status (In Progress / Completed / Failed) can be verified.",
        "Error logs are stored upon output failure.",
        "Success logs are stored upon successful output.",
        "Logs include user_id, output conditions, output count, and timestamp.",
        "Audit logs are stored in tamper-evident storage.",
        "Parameterized queries are used as SQL injection countermeasures.",
        "Target data for output is sanitized (Anti-XSS).",
        "Rate limiting is applied (to prevent continuous mass output).",
        "API responses do not include internal server paths.",
        "Output APIs are REST-compliant.",
        "API versioning is managed.",
        "Target initial response time for the output API is within 500ms (until job acceptance).",
        "Communication must be via HTTPS.",
        "Export events can be integrated with the notification system.",
        "Administrators can review the output history in a list view.",
        "Output history is searchable.",
        "Output history is retained for a specific period.",
        "Users can only view their own output history.",
        "--- Additional Security & Professional Requirements ---",
        "Implement watermarking (e.g., 'CONFIDENTIAL') in PDFs based on the data classification level.",
        "Ensure CSV files are generated with a Byte Order Mark (BOM) if specific regional Excel compatibility is required.",
        "Large PDF generation must use a streaming approach or chunking to prevent memory exhaustion on the application server."
    ]
}